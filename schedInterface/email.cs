using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using hostoverride;

namespace schedInterface
{
    public class email
    {
        public string hostoverride_api_key = "482756e0-b631-401e-a66f-66b203adbbb6";
        private api _api = new api();
        private dataconnection dc = new dataconnection();
        private DAL dal = new DAL();
        private email_queue _queue = new email_queue();
        private users _users = new users();

        public bool forgot_password(User u)
        {
            Queue q = new Queue();
            Key clientByApiKey = this._api.getClientByAPIKey(this.hostoverride_api_key);
            q.api_id = clientByApiKey.id;
            q.email_to = u.email;
            q.email_from = "notify@fnsign.fntech.com";
            q.email_subject = "FNSIGN: Forgot Password Request";
            q.email_body = "<html> <head> <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /> <meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; maximum-scale=1.0;\"> <title>Forgot Password</title> <style type=\"text/css\"> div, p, a, li, td { -webkit-text-size-adjust:none; } *{ -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } .ReadMsgBody {width: 100%; background-color: #ffffff;} .ExternalClass {width: 100%; background-color: #ffffff;} body{width: 100%; height: 100%; background-color: #ffffff; margin:0; padding:0; -webkit-font-smoothing: antialiased;} html{width: 100%; background-color: #ffffff;} @font-face {font-family: 'proxima_novalight';src: url('http://rocketway.net/themebuilder/products/font/proximanova-light-webfont.eot');src: url('http://rocketway.net/themebuilder/products/font/proximanova-light-webfont.eot?#iefix') format('embedded-opentype'),url('http://rocketway.net/themebuilder/products/font/proximanova-light-webfont.woff') format('woff'),url('http://rocketway.net/themebuilder/products/font/proximanova-light-webfont.ttf') format('truetype');font-weight: normal;font-style: normal;} @font-face {font-family: 'proxima_nova_rgregular'; src: url('http://rocketway.net/themebuilder/products/font/proximanova-regular-webfont.eot');src: url('http://rocketway.net/themebuilder/products/font/proximanova-regular-webfont.eot?#iefix') format('embedded-opentype'),url('http://rocketway.net/themebuilder/products/font/proximanova-regular-webfont.woff') format('woff'),url('http://rocketway.net/themebuilder/products/font/proximanova-regular-webfont.ttf') format('truetype');font-weight: normal;font-style: normal;} @font-face {font-family: 'proxima_novasemibold';src: url('http://rocketway.net/themebuilder/products/font/proximanova-semibold-webfont.eot');src: url('http://rocketway.net/themebuilder/products/font/proximanova-semibold-webfont.eot?#iefix') format('embedded-opentype'),url('http://rocketway.net/themebuilder/products/font/proximanova-semibold-webfont.woff') format('woff'),url('http://rocketway.net/themebuilder/products/font/proximanova-semibold-webfont.ttf') format('truetype');font-weight: normal;font-style: normal;} @font-face {font-family: 'proxima_nova_rgbold';src: url('http://rocketway.net/themebuilder/products/font/proximanova-bold-webfont.eot');src: url('http://rocketway.net/themebuilder/products/font/proximanova-bold-webfont.eot?#iefix') format('embedded-opentype'),url('http://rocketway.net/themebuilder/products/font/proximanova-bold-webfont.woff') format('woff'),url('http://rocketway.net/themebuilder/products/font/proximanova-bold-webfont.ttf') format('truetype');font-weight: normal;font-style: normal;} @font-face {font-family: 'proxima_novathin';src: url('http://rocketway.net/themebuilder/products/font/proximanova-thin-webfont.eot');src: url('http://rocketway.net/themebuilder/products/font/proximanova-thin-webfont.eot?#iefix') format('embedded-opentype'),url('http://rocketway.net/themebuilder/products/font/proximanova-thin-webfont.woff') format('woff'),url('http://rocketway.net/themebuilder/products/font/proximanova-thin-webfont.ttf') format('truetype');font-weight: normal;font-style: normal;} @font-face {font-family: 'proxima_novaextrabold';src: url('http://rocketway.net/themebuilder/products/font/proximanova-extrabold-webfont.eot');src: url('http://rocketway.net/themebuilder/products/font/proximanova-extrabold-webfont.eot?#iefix') format('embedded-opentype'),url('http://rocketway.net/themebuilder/products/font/proximanova-extrabold-webfont.woff2') format('woff2'),url('http://rocketway.net/themebuilder/products/font/proximanova-extrabold-webfont.woff') format('woff'),url('http://rocketway.net/themebuilder/products/font/proximanova-extrabold-webfont.ttf') format('truetype');font-weight: normal;font-style: normal;} p {padding: 0!important; margin-top: 0!important; margin-right: 0!important; margin-bottom: 0!important; margin-left: 0!important; } .hover:hover {opacity:0.85;filter:alpha(opacity=85);} .image73 img {width: 73px; height: auto;} .image42 img {width: 42px; height: auto;} .image400 img {width: 400px; height: auto;} .icon49 img {width: 49px; height: auto;} .image113 img {width: 113px; height: auto;} .image70 img {width: 70px; height: auto;} .image67 img {width: 67px; height: auto;} .image80 img {width: 80px; height: auto;} .image35 img {width: 35px; height: auto;} .icon49 img {width: 49px; height: auto;} </style> <style type=\"text/css\"> @media only screen and (max-width: 479px){ body{width:auto!important;} table[class=full] {width: 100%!important; clear: both; } table[class=mobile] {width: 100%!important; padding-left: 30px; padding-right: 30px; clear: both; } table[class=fullCenter] {width: 100%!important; text-align: center!important; clear: both; } td[class=fullCenter] {width: 100%!important; text-align: center!important; clear: both; } *[class=erase] {display: none;} *[class=buttonScale] {float: none!important; text-align: center!important; display: inline-block!important; clear: both;} .image400 img {width: 100%!important; height: auto;} } } </style> </head> <body leftmargin=\"0\" topmargin=\"0\" marginwidth=\"0\" marginheight=\"0\" yahoo=\"fix\"> <div class=\"ui-sortable\" id=\"sort_them\"> <!-- Notification 1 --> <div style=\"display: none;\" id=\"element_07918058051727712\"></div><!-- End Notification 1 --> <!-- Notification 2 --> <div style=\"display: none;\" id=\"element_07352362624369562\"></div><!-- End Notification 2 --> <!-- Notification 3 --> <div style=\"display: none;\" id=\"element_07717728225979954\"></div><!-- End Notification 3 --> <!-- Notification 4 --> <div style=\"display: none;\" id=\"element_09310244496446103\"></div><!-- End Notification 4 --> <!-- Notification 5 --> <table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"full\" bgcolor=\"#f3f5fb\"style=\"background-image: url('http://rocketway.net/themebuilder/products/notifications/patterns/argyle.png'); -webkit-background-size: inherit; background-position: initial initial; background-repeat: repeat repeat;\" oldcss=\"background-image: url('http://rocketway.net/themebuilder/products/notifications/patterns/asfalt.png'); -webkit-background-size: inherit; background-position: initial initial; background-repeat: repeat repeat;\"> <tr> <td align=\"center\"> <!-- Mobile Wrapper --> <table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"mobile\"> <tr> <td width=\"100%\" height=\"100\" align=\"center\"> <!-- SORTABLE --> <div class=\"sortable_inner ui-sortable\"> <!-- Space --> <table width=\"400\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"full\" object=\"drag-module-small\"> <tr> <td width=\"100%\" height=\"50\"></td> </tr> </table><!-- End Space --> <!-- Space --> <table width=\"400\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"full\" object=\"drag-module-small\"> <tr> <td width=\"100%\" height=\"50\"></td> </tr> </table><!-- End Space --> <!-- Shadow --> <table width=\"400\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"full\" style=\"border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px;\"> <tr> <td width=\"100%\" style=\"border-top-left-radius: 6px; border-top-right-radius: 6px; border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; -webkit-box-shadow: rgba(0, 0, 0, 0.74902) 0px 0px 6px 0px; box-shadow: rgba(0, 0, 0, 0.0980392) 0px 0px 6px 0px; background-color: rgb(255, 255, 255);\" bgcolor=\"#ffffff\"> <!-- Start Top --> <table width=\"400\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"mobile\" bgcolor=\"#1dc8e9\" style=\"background-image: url('http://rocketway.net/themebuilder/products/notifications/templates/notify2/images/not5_bg_image.jpg'); -webkit-background-size: cover; background-size: cover; border-top-right-radius: 6px; border-top-left-radius: 6px; background-color: rgb(48, 48, 48); background-position: center center; background-repeat: no-repeat;\" id=\"not5ChangeBG\"object=\"drag-module-small\"> <tr> <td width=\"100%\" valign=\"middle\" align=\"center\"> <!-- Header Text --> <table width=\"300\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" style=\"text-align: center; border-collapse:collapse; mso-table-lspace:0pt; mso-table-rspace:0pt;\" class=\"fullCenter\"> <tr> <td width=\"100%\" height=\"35\"></td></tr> <tr> <td width=\"100%\" class=\"image70\"> <!-- THIS IS THE PROFILE PIC OF THE USER --> <a href=\"#\" style=\"text-decoration: none;\"><img src=\"http://fnsign.fntech.com/assets/images/logo.png\" width=\"112\" alt=\"\" border=\"0\" class=\"hover\" ></a> </td> </tr> <tr> <td width=\"100%\" height=\"20\" style=\"font-size: 1px; line-height: 1px;\">&nbsp;</td> </tr> <tr> <td valign=\"middle\" width=\"100%\" style=\"text-align: center; font-family: 'Open Sans', Helvetica, Arial, sans-serif; font-size: 16px; color: rgb(255, 255, 255); line-height: 24px; font-weight: 400;\" class=\"fullCenter\" ><p>Hi " + u.first_name + ", you requested your password from FNSIGN, your login credentials are below</p><ul><li>Email: " + u.email + "</li><li>Password: " + u.password + "</li></ul></td> </tr> <tr> <td width=\"100%\" height=\"35\" style=\"font-size: 1px; line-height: 1px;\">&nbsp;</td> </tr> <tr> <td width=\"100%\"> <!-- Triangle Code --> <table width=\"1\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\"> <tr> <td width=\"9\" height=\"1\" align=\"center\" bgcolor=\"#ff9800\"style=\"font-size: 1px; line-height: 1px; background-color: rgb(14, 50, 119);\">&nbsp;</td> </tr> </table> <table width=\"3\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\"> <tr> <td width=\"3\" height=\"1\" align=\"center\" bgcolor=\"#ff9800\"style=\"font-size: 1px; line-height: 1px; background-color: rgb(14, 50, 119);\">&nbsp;</td> </tr> </table> <table width=\"5\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\"> <tr> <td width=\"5\" height=\"1\" align=\"center\" bgcolor=\"#ff9800\"style=\"font-size: 1px; line-height: 1px; background-color: rgb(14, 50, 119);\">&nbsp;</td> </tr> </table> <table width=\"7\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\"> <tr> <td width=\"7\" height=\"1\" align=\"center\" bgcolor=\"#ff9800\"style=\"font-size: 1px; line-height: 1px; background-color: rgb(14, 50, 119);\">&nbsp;</td> </tr> </table> <table width=\"9\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\"> <tr> <td width=\"9\" height=\"1\" align=\"center\" bgcolor=\"#ff9800\"style=\"font-size: 1px; line-height: 1px; background-color: rgb(14, 50, 119);\">&nbsp;</td> </tr> </table> </td> </tr> </table> </td> </tr> </table><!-- End Top --> <table width=\"400\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"mobile\" bgcolor=\"#ff9800\"object=\"drag-module-small\" style=\"background-color: rgb(14, 50, 119);\"> <tr> <td width=\"100%\" valign=\"middle\" align=\"center\"> <!-- Header Text --> <table width=\"350\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" style=\"text-align: center; border-collapse:collapse; mso-table-lspace:0pt; mso-table-rspace:0pt;\" class=\"fullCenter\"> <tr> <td width=\"100%\" height=\"35\"></td> </tr> <tr> <td valign=\"middle\" width=\"100%\" style=\"text-align: center; font-family: 'Open Sans', Helvetica, Arial, sans-serif; font-size: 30px; color: rgb(255, 255, 255); line-height: 36px; font-weight: 100;\" class=\"fullCenter\" > </td> </tr> <tr> <td width=\"100%\" height=\"35\" style=\"font-size: 1px; line-height: 1px;\">&nbsp;</td> </tr> </table> </td> </tr> </table> <table width=\"400\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"mobile\" bgcolor=\"#ffffff\"object=\"drag-module-small\" style=\"background-color: rgb(255, 255, 255);\"> <tr> <td width=\"100%\" height=\"35\" style=\"font-size: 1px; line-height: 1px;\">&nbsp;</td> </tr> <tr> <td width=\"100%\" valign=\"middle\" align=\"center\"> <table width=\"300\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"fullCenter\"> <tr> <td valign=\"middle\" width=\"100%\" style=\"text-align: center; font-family: 'Open Sans', Helvetica, Arial, sans-serif; font-size: 15px; color: rgb(95, 106, 116); line-height: 24px; font-weight: 400; font-style: italic;\" class=\"fullCenter\" > You can use the details above to login to FNSIGN.</td> </tr> </table> </td> </tr> </table> <table width=\"400\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"mobile\" bgcolor=\"#ffffff\"object=\"drag-module-small\" style=\"background-color: rgb(255, 255, 255);\"> <tr> <td width=\"100%\" valign=\"middle\" align=\"center\"> <table width=\"300\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" style=\"text-align: center; border-collapse:collapse; mso-table-lspace:0pt; mso-table-rspace:0pt;\" class=\"fullCenter\"> <tr> <td width=\"100%\" height=\"35\" style=\"font-size: 1px; line-height: 1px;\">&nbsp;</td> </tr> </table> </td> </tr> </table> <table width=\"400\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"mobile\" bgcolor=\"#ffffff\"object=\"drag-module-small\" style=\"background-color: rgb(255, 255, 255);\"> <tr> <td width=\"100%\" valign=\"middle\" align=\"center\"> <table width=\"300\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" style=\"text-align: center; border-collapse:collapse; mso-table-lspace:0pt; mso-table-rspace:0pt;\" class=\"fullCenter\"> <tr> <td width=\"100%\" align=\"center\"> <table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"buttonScale\"> <tr> <td align=\"center\" height=\"34\" bgcolor=\"#ff9800\"style=\"border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; padding-left: 15px; padding-right: 15px; font-family: 'Open Sans', Helvetica, Arial, sans-serif; color: rgb(255, 255, 255); font-size: 13px; font-weight: 600; line-height: 1px; text-transform: uppercase; background-color: rgb(14, 50, 119);\"> <a href=\"https://fnsign.fntech.com/login\" style=\"color: rgb(255, 255, 255); text-decoration: none; width: 100%;\">LOGIN</a> </td> </tr> </table> </td> </tr> </table> </td> </tr> </table> <table width=\"400\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"mobile\" bgcolor=\"#ffffff\"object=\"drag-module-small\" style=\"border-bottom-right-radius: 6px; border-bottom-left-radius: 6px; background-color: rgb(255, 255, 255);\"> <tr> <td width=\"100%\" height=\"40\" style=\"font-size: 1px; line-height: 1px;\">&nbsp;</td> </tr> </table><!-- End Second --> </td> </tr> </table><!-- End Shadow --> <!-- CopyRight --> <table width=\"352\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"full\" object=\"drag-module-small\"> <tr> <td width=\"100%\" height=\"25\"></td> </tr> <tr> <td valign=\"middle\" width=\"100%\" style=\"text-align: center; font-family: 'Open Sans', Helvetica, Arial, sans-serif; color: rgb(165, 168, 174); font-size: 12px; font-weight: 400; line-height: 18px;\" class=\"fullCenter\" cu-identify=\"element_027216039318591356\">© FNTECH 2014-2015</td> </tr> </table> <div style=\"display: none\" id=\"element_0688598082633689\"></div> <table width=\"352\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" align=\"center\" class=\"full\" object=\"drag-module-small\"> <tr> <td width=\"100%\" height=\"60\" style=\"font-size: 1px; line-height: 1px;\">&nbsp;</td> </tr> <tr> <td width=\"100%\" height=\"1\" style=\"font-size: 1px; line-height: 1px;\">&nbsp;</td> </tr> </table><!-- End CopyRight --> </div> </td> </tr> </table> </div> </td> </tr> </table><!-- End Notification 5 --> <!-- Notification 6 --> <div style=\"display: none;\" id=\"element_01200263979844749\"></div><!-- End Notification 6 --> </div> </body> <style>body{ background: url('http://rocketway.net/themebuilder/products/notifications/patterns/argyle.png) !important; } </style>\";";
            q.email_bcc = string.Empty;
            q.email_cc = string.Empty;
            this._queue.add(q);
            return true;
        }
    }
}
